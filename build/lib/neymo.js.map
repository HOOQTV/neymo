{"version":3,"sources":["neymo.js"],"names":["Neymo","key","secret","url","options","NeymoError","credentials","api_key","api_secret","push","retries","client","Blackadder","type","payload","substr","uuid","v4","headers","undefined","indexOf","changeTo","paramCase","Object","assign","post","conclude","body","response"],"mappings":";;;;;;qjBAAA;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA;IACqBA,K;AACjB;;;;;AAKA,mBAAYC,GAAZ,EAAiBC,MAAjB,EAAyBC,GAAzB,EAA4C;AAAA,YAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACxC,YAAI,CAACH,GAAD,IAAQ,CAACC,MAAb,EAAqB;AACjB,kBAAM,IAAIG,iBAAJ,CAAe,6BAAf,EAA8C,KAA9C,EAAqD,mBAArD,CAAN;AACH;AACD,aAAKC,WAAL,GAAmB;AACfC,qBAASN,GADM;AAEfO,wBAAYN;AAFG,SAAnB;AAIA,aAAKC,GAAL,GAAWA,GAAX;AACAC,gBAAQK,IAAR,CAAa,EAAEC,SAAS,CAAX,EAAb;AACA,aAAKC,MAAL,GAAc,IAAIC,oBAAJ,CAAeR,OAAf,CAAd;AACH;;;;;;oBAEUA,O,uEAAU,EAAES,MAAM,KAAR,E;;;;;;AACXC,uC,GAAU;AACR,kDAAiBV,QAAQS,IAAR,CAAaE,MAAb,CAAoB,CAApB,EAAuB,CAAvB,CAAjB,SAA8CC,eAAKC,EAAL;AADtC,iC,EAGZC,O,GAAU;AACN,oDAAgB;AADV,iC;;;AAId,qCAASjB,GAAT,IAAgBG,OAAhB,EAAyB;AACrB,wCAAIA,QAAQH,GAAR,MAAiBkB,SAArB,EAAgC;AAC5BL,gDAAQb,IAAImB,OAAJ,CAAY,GAAZ,KAAoB,CAApB,GAAwBnB,GAAxB,GAA8BoB,qBAASC,SAAT,CAAmBrB,GAAnB,CAAtC,IAAiEG,QAAQH,GAAR,CAAjE;AACH;AACJ;AACDsB,uCAAOC,MAAP,CAAcV,OAAd,EAAuB,KAAKR,WAA5B;8CACO,I;;uCAAoB,KAAKK,MAAL,CAAYc,IAAZ,CAAiB,KAAKtB,GAAtB,EAA2BW,OAA3B,EAAoC,EAAEI,gBAAF,EAApC,C;;;;6EAAfQ,Q;;;;;;;;;;;;;;;;;;wCAGa;AAAA,gBAAlBC,IAAkB,SAAlBA,IAAkB;AAAA,gBAAZC,QAAY,SAAZA,QAAY;;AACzB;AACA,mBAAOD,IAAP;AACH;;;;;;kBAvCgB3B,K","file":"neymo.js","sourcesContent":["/** @module Neymo*/\nimport { NeymoError } from './error';\nimport Blackadder from 'blackadder';\nimport changeTo from 'change-case';\nimport uuid from 'uuid';\n\n/** Class representing Neymo */\nexport default class Neymo {\n    /**\n     * Constructs Neymo\n     *\n     * @param {String} name - The name.\n     */\n    constructor(key, secret, url, options = {}) {\n        if (!key || !secret) {\n            throw new NeymoError('key and secret are required', 40001, 'Neymo.constructor');\n        }\n        this.credentials = {\n            api_key: key,\n            api_secret: secret\n        };\n        this.url = url;\n        options.push({ retries: 0 });\n        this.client = new Blackadder(options);\n    }\n\n    async send(options = { type: 'sms' }) {\n        const payload = {\n                'client-ref': `${options.type.substr(0, 3)}-${uuid.v4()}`\n            },\n            headers = {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            };\n\n        for (let key in options) {\n            if (options[key] !== undefined) {\n                payload[key.indexOf('_') >= 0 ? key : changeTo.paramCase(key)] = options[key];\n            }\n        }\n        Object.assign(payload, this.credentials);\n        return this.conclude(await this.client.post(this.url, payload, { headers }));\n    }\n\n    conclude({ body, response }) {\n        // FIXME; transform to a sensible object\n        return body;\n    }\n}\n"],"sourceRoot":"/Users/irfannurhakim/Documents/Project/hooq/neymo/lib"}